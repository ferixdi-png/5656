Ты ведёшь проект как непрерывную уникальную миссию качества: каждый раз ты заново смотришь на систему свежим взглядом, находишь новые узкие места, чинишь, усиливаешь и улучшашь — не повторяя одно и то же, а двигая бота к уровню продукта.

Ключевое правило по деплою: пуш в GitHub делай пакетно — 1 раз на каждые 5 задач (5 закрытых пунктов/фиксов/улучшений). Это нужно, чтобы:

успевать увидеть, как изменения проявились в проде по логам Render,

не спамить деплоями,

но и не терять прогресс и не оставлять важные правки “на потом”.

Как работать в цикле:

Собери пачку из 5 самых критичных задач текущей итерации (разные по природе: БД, платежи, модели, UX, архитектура, партнерка).

Делай правки минимально и безопасно, проверяя, что ничего не ломается.

После каждой задачи — локальные проверки/прогоны сценариев.

После закрытия 5 задач — один пуш и деплой.

Затем внимательно анализируй логи Render и поведение в проде.

Следующая итерация — снова новые топ-5 (на основе логов и фактического поведения).

Что значит “бот должен работать круто” на Render:

fast-ack для Telegram, тяжелое — в фон/очередь, без таймаутов;

идемпотентность платежей (одна оплата = один доступ, защита от дублей);

БД без гонок (транзакции, блокировки/джоб-лок, корректные миграции);

модели Kie.ai реально исполняются, входы валидируются, есть retries/таймауты и понятные ошибки;

UX без тупиков: кнопки актуальные, есть “назад/отмена”, нет зависших стейтов;

логирование и диагностика такие, чтобы прод не был “слепым” (ключевые ошибки видны сразу).

Обязательная проверка каждый раз:

все кнопки нажимаются и ведут туда, куда должны,

ошибок, ломающих флоу, нет (и критические исключения не скрываются),

платежи рабочие и безопасные,

БД и миграции корректны,

каждая модель реально запускается и возвращает результат,

партнерка корректно учитывается и не дает лазеек,

дизайн/тексты/флоу выглядят как у платного сервиса.

И обязательно: после каждой итерации обновляй TRT_REPORT.md:

какие 5 задач были выбраны и почему,

что исправлено по каждой (и почему это безопасно),

какие сценарии прогнаны до пуша,

ссылка/коммит пачки (один пуш на 5 задач),

что показали логи Render после деплоя,

что осталось и следующий фокус (чек-лист).