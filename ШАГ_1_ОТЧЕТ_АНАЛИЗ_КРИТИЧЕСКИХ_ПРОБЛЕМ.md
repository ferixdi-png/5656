# –®–ê–ì 1 ‚Äî –û–¢–ß–ï–¢: –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –≤ `bot_kie.py`

## –î–∞—Ç–∞: 2024-12-19

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –†–ê–ë–û–¢–´

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä—É–±–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 550-1255)

**–ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω –±–æ–ª—å—à–æ–π –æ–±—Ä—É–±–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ pricing-–ª–æ–≥–∏–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 556-930)
  - –ë–ª–æ–∫ —Å–æ–¥–µ—Ä–∂–∞–ª –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏
  - –ö–æ–¥ –±—ã–ª —á–∞—Å—Ç—å—é —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
  - –ë–ª–æ–∫ –Ω–∞—á–∏–Ω–∞–ª—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞ –∏ —Å–æ–¥–µ—Ä–∂–∞–ª –º–Ω–æ–∂–µ—Å—Ç–≤–æ `elif` –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ `if`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±—Ä—É–±–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω, —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã.

---

### 2. –ê–Ω–∞–ª–∏–∑ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–≥–æ –∫–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏ 945-1255)

**–ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ –ø–æ—Å–ª–µ `return` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `calculate_price_rub` (—Å—Ç—Ä–æ–∫–∏ 947-1241)
  - –ö–æ–¥ –±—ã–ª —Ä–∞–∑–º–µ—â–µ–Ω –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `return float(price_result.rub)` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 946
  - –°–æ–¥–µ—Ä–∂–∞–ª –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ `calculate_price_rub` –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
  - –ö–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è, —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –ø–æ—Å–ª–µ `return`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω, —Ñ—É–Ω–∫—Ü–∏—è `calculate_price_rub` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.

---

### 3. –î—É–±–ª–∏–∫–∞—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π (—Å—Ç—Ä–æ–∫–∏ 389-539)

**–ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

#### 3.1. –î—É–±–ª–∏–∫–∞—Ç—ã `active_generations_lock`
- **–ë—ã–ª–æ:** 6 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 229, 484, 525, 539, 547, 560
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 229
- **–£–¥–∞–ª–µ–Ω–æ:** 5 –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

#### 3.2. –î—É–±–ª–∏–∫–∞—Ç—ã `saved_generations`
- **–ë—ã–ª–æ:** 4 –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 487, 528, 542, 563
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 232 (–ø–æ—Å–ª–µ `active_generations_lock`)
- **–£–¥–∞–ª–µ–Ω–æ:** –í—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã

#### 3.3. –î—É–±–ª–∏–∫–∞—Ç—ã `_http_client`
- **–ë—ã–ª–æ:** 4 –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 493, 534, 550, 569
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 550 (–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –º–µ—Å—Ç–µ)
- **–£–¥–∞–ª–µ–Ω–æ:** 3 –¥—É–±–ª–∏–∫–∞—Ç–∞

#### 3.4. –î—É–±–ª–∏–∫–∞—Ç—ã `SELECTING_MODEL, INPUTTING_PARAMS, CONFIRMING_GENERATION`
- **–ë—ã–ª–æ:** 3 –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 393, 415, 446
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 393
- **–£–¥–∞–ª–µ–Ω–æ:** 2 –¥—É–±–ª–∏–∫–∞—Ç–∞

#### 3.5. –î—É–±–ª–∏–∫–∞—Ç—ã `MAX_CONCURRENT_GENERATIONS_PER_USER`
- **–ë—ã–ª–æ:** –ù–µ –±—ã–ª–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å, –Ω–æ –Ω–µ –æ–±—ä—è–≤–ª–µ–Ω–æ)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 234
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** 5

#### 3.6. –î—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ "# NOTE: active_generations already declared above"
- –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä `_file_locks` –∏ `_data_cache`
- –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–π (Payment states, Admin test OCR state, Broadcast states)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã —É–¥–∞–ª–µ–Ω—ã, –∫–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ.

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `calculate_price_rub`

**–ê–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏:**

```python
def calculate_price_rub(model_id: str, params: dict = None, is_admin: bool = False, user_id: int = None) -> float:
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏:**
1. ‚úÖ –§—É–Ω–∫—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è thin-wrapper –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `services.pricing_service.get_price()` –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
3. ‚úÖ –ò–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å fallback
4. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
   - `dict` —Å –∫–ª—é—á–æ–º `price_rub`
   - –ß–∏—Å–ª–æ–≤—ã–µ —Ç–∏–ø—ã (`int`, `float`, `Decimal`)
   - –û–±—ä–µ–∫—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `rub`
5. ‚úÖ –ò–º–µ–µ—Ç fallback –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ `services.pricing_service`
6. ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –¥–ª—è `params` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ `get_price`
- ‚ö†Ô∏è Fallback –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1.0, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `params` –Ω–∞ `None` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π fallback –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–±–æ–ª—å—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –£–¥–∞–ª–µ–Ω–æ:
- **–û–±—Ä—É–±–ª–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤:** 1 (375+ —Å—Ç—Ä–æ–∫)
- **–ù–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–≥–æ –∫–æ–¥–∞:** 1 (295+ —Å—Ç—Ä–æ–∫)
- **–î—É–±–ª–∏–∫–∞—Ç–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π:** 15+
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:** 10

### –î–æ–±–∞–≤–ª–µ–Ω–æ:
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ `saved_generations`:** 1
- **–û–±—ä—è–≤–ª–µ–Ω–∏–µ `MAX_CONCURRENT_GENERATIONS_PER_USER`:** 1

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:** 10
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤ try-except –±–ª–æ–∫–∞—Ö
  - –î–≤–æ–π–Ω—ã–µ `else:` –±–ª–æ–∫–∏
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `if`

---

## ‚ö†Ô∏è –û–°–¢–ê–í–®–ò–ï–°–Ø –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø

–í—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–∞ —è–≤–ª—è—é—Ç—Å—è **–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–º–∏**:

1. **–ò–º–ø–æ—Ä—Ç—ã** (19 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π):
   - `telegram.ext`, `telegram`, `dotenv`, `aiohttp`, `aiofiles`, `PIL`, `pytesseract`
   - –≠—Ç–∏ –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ runtime –æ–∫—Ä—É–∂–µ–Ω–∏–∏
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –∫–æ–¥–∞

2. **–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (3 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è):
   - `UserContext` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
   - `Decimal` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π
   - `Path` - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `pathlib` –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π

**–í—ã–≤–æ–¥:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ.

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –û–±—Ä—É–±–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í—Å–µ –æ–±—Ä—É–±–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã |
| –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í–µ—Å—å –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω |
| –î—É–±–ª–∏–∫–∞—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã —É–¥–∞–ª–µ–Ω—ã |
| –§—É–Ω–∫—Ü–∏—è `calculate_price_rub` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–±–æ–ª—å—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π |
| –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã |
| –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–∞ | ‚ö†Ô∏è –ù–µ–∫—Ä–∏—Ç–∏—á–Ω–æ | –¢–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏–º–ø–æ—Ä—Ç–∞—Ö |

---

## üéØ –í–´–í–û–î–´

1. ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:** –í—Å–µ –æ–±—Ä—É–±–ª–µ–Ω–Ω—ã–µ –±–ª–æ–∫–∏, –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ –∏ –¥—É–±–ª–∏–∫–∞—Ç—ã —É–¥–∞–ª–µ–Ω—ã
2. ‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:** –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
3. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ —É–ª—É—á—à–µ–Ω–∞:** –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∫–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ
4. ‚ö†Ô∏è **–¢—Ä–µ–±—É—é—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:** –§—É–Ω–∫—Ü–∏—è `calculate_price_rub` —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞

**–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –∫ –®–ê–ì 2 ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.**

