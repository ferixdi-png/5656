# üìä –û–¢–ß–ï–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤–≤–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–ê–õ–ò–î–ê–¶–ò–Ø –î–û–ë–ê–í–õ–ï–ù–ê**

---

## ‚úÖ 1. –¢–ï–ö–£–©–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### üìç –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ inline keyboard:

#### ‚úÖ Enum –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å—Ç—Ä–æ–∫–∏ 8841-8901):
```python
# If parameter has enum values, show buttons
elif enum_values:
    logger.info(f"üî• start_next_parameter: {param_name} has enum values, showing buttons, user_id={user_id}")
    keyboard = []
    # Create buttons in rows of 2
    for i in range(0, len(enum_values), 2):
        row = []
        row.append(InlineKeyboardButton(
            enum_values[i],
            callback_data=f"set_param:{param_name}:{enum_values[i]}"
        ))
        if i + 1 < len(enum_values):
            row.append(InlineKeyboardButton(
                enum_values[i + 1],
                callback_data=f"set_param:{param_name}:{enum_values[i + 1]}"
            ))
        keyboard.append(row)
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ö–û–†–†–ï–ö–¢–ù–û** ‚Äî –¥–ª—è enum –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è inline keyboard –∫–Ω–æ–ø–∫–∏

#### ‚úÖ Boolean –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å—Ç—Ä–æ–∫–∏ 8795-8839):
```python
# Handle boolean parameters
if param_type == 'boolean':
    default_value = param_info.get('default', False)
    is_optional = not param_info.get('required', False)
    
    keyboard = [
        [
            InlineKeyboardButton("‚úÖ –î–∞ (true)", callback_data=f"set_param:{param_name}:true"),
            InlineKeyboardButton("‚ùå –ù–µ—Ç (false)", callback_data=f"set_param:{param_name}:false")
        ]
    ]
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ö–û–†–†–ï–ö–¢–ù–û** ‚Äî –¥–ª—è boolean –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ "–î–∞/–ù–µ—Ç"

#### ‚ö†Ô∏è –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å—Ç—Ä–æ–∫–∏ 8902-8980):
```python
else:
    # Text input
    param_desc = param_info.get('description', '')
    max_length = param_info.get('max_length')
    max_text = f"\n\n–ú–∞–∫—Å–∏–º—É–º {max_length} —Å–∏–º–≤–æ–ª–æ–≤." if max_length else ""
    # ... –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∑–∞–ø—Ä–æ—Å–æ–º —Ç–µ–∫—Å—Ç–∞ ...
    session['waiting_for'] = param_name
    return INPUTTING_PARAMS
```

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

---

## ‚úÖ 2. –î–û–ë–ê–í–õ–ï–ù–ù–ê–Ø –í–ê–õ–ò–î–ê–¶–ò–Ø

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π –≤ confirm_generation (—Å—Ç—Ä–æ–∫–∏ 11127-11180):
```python
# üî¥ –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–ê–†–ê–ú–ï–¢–†–û–í: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
user_lang = get_user_language(user_id) if user_id else 'ru'
validation_errors = []

for param_name, param_value in params.items():
    if param_name in input_params:
        param_info = input_params[param_name]
        param_type = param_info.get('type', 'string')
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π
        enum_values = param_info.get('enum')
        if enum_values:
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            param_value_str = str(param_value)
            if param_value_str not in enum_values:
                # –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ enum –∑–Ω–∞—á–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑—É–µ–º default –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è–µ–º
                default_value = param_info.get('default')
                if default_value and default_value in enum_values:
                    params[param_name] = default_value
                    logger.warning(f"Invalid enum value for {param_name}: {param_value_str}, using default: {default_value}")
                else:
                    validation_errors.append(...)
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (max_length)
        if param_type == 'string' and isinstance(param_value, str):
            max_length = param_info.get('max_length')
            if max_length and len(param_value) > max_length:
                validation_errors.append(...)
        
        # –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤ (min_items/max_items)
        if param_type == 'array' and isinstance(param_value, list):
            min_items = param_info.get('min_items')
            max_items = param_info.get('max_items')
            if min_items is not None and len(param_value) < min_items:
                validation_errors.append(...)
            if max_items is not None and len(param_value) > max_items:
                validation_errors.append(...)

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
if validation_errors:
    error_text = "\n\n".join(validation_errors)
    await status_message.edit_text(...)
    return ConversationHandler.END
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π, —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –º–∞—Å—Å–∏–≤–æ–≤ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π –≤ set_param callback (—Å—Ç—Ä–æ–∫–∏ 5526-5550):
```python
# üî¥ –í–ê–õ–ò–î–ê–¶–ò–Ø ENUM –ó–ù–ê–ß–ï–ù–ò–ô: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö
enum_values = param_info.get('enum')
if enum_values and param_value not in enum_values:
    # –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ enum –∑–Ω–∞—á–µ–Ω–∏–µ
    user_lang = get_user_language(user_id) if user_id else 'ru'
    error_text = (
        f"‚ùå <b>–ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</b>\n\n"
        f"–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: {', '.join(enum_values)}\n"
        f"–í–≤–µ–¥–µ–Ω–æ: {param_value}"
    ) if user_lang == 'ru' else (...)
    await query.answer(error_text, show_alert=True)
    return ConversationHandler.END
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —á–µ—Ä–µ–∑ callback

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è max_length –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 10796-10800):
```python
# Validate max length
if max_length and len(text) > max_length:
    await update.message.reply_text(
        f"‚ùå –¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (–º–∞–∫—Å. {max_length} —Å–∏–º–≤–æ–ª–æ–≤). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
    )
    return INPUTTING_PARAMS
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–ñ–ï –ü–†–ò–°–£–¢–°–¢–í–£–ï–¢** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è max_length –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## ‚ö†Ô∏è 3. –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### üü° –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ min/max –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  ```python
  # Validate enum parameters before sending to API
  input_params = model_info.get('input_params', {})
  for param_name, param_value in params.items():
      if param_name in input_params:
          param_info = input_params[param_name]
          enum_values = param_info.get('enum')
          if enum_values and param_value not in enum_values:
              # Invalid enum value - use default or reject
              default_value = param_info.get('default')
              if default_value and default_value in enum_values:
                  params[param_name] = default_value
                  logger.warning(f"Invalid enum value for {param_name}: {param_value}, using default: {default_value}")
              else:
                  # Reject invalid value
                  await status_message.edit_text(
                      f"‚ùå <b>–ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ {param_name}</b>\n\n"
                      f"–î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: {', '.join(enum_values)}",
                      parse_mode='HTML'
                  )
                  return ConversationHandler.END
  ```

#### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `input_parameters` (—Å—Ç—Ä–æ–∫–∞ 8986) –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ max_length –∏ –¥—Ä—É–≥–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `bot_kie.py`, —Å—Ç—Ä–æ–∫–∞ 8986
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é:
  ```python
  # Validate text parameters
  if param_name in input_params:
      param_info = input_params[param_name]
      max_length = param_info.get('max_length')
      if max_length and len(param_value) > max_length:
          await context.bot.send_message(
              chat_id=chat_id,
              text=f"‚ùå <b>–ü—Ä–µ–≤—ã—à–µ–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞</b>\n\n"
                   f"–ú–∞–∫—Å–∏–º—É–º {max_length} —Å–∏–º–≤–æ–ª–æ–≤.\n"
                   f"–í–≤–µ–¥–µ–Ω–æ: {len(param_value)} —Å–∏–º–≤–æ–ª–æ–≤.\n\n"
                   f"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä–æ—á–µ.",
              parse_mode='HTML'
          )
          return INPUTTING_PARAMS
  ```

#### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ set_param callback**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `button_callback` (—Å—Ç—Ä–æ–∫–∞ 5526) –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ `set_param:` –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ enum
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `bot_kie.py`, —Å—Ç—Ä–æ–∫–∞ 5526-5596
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é:
  ```python
  if data.startswith("set_param:"):
      parts = data.split(":", 2)
      if len(parts) == 3:
          param_name = parts[1]
          param_value = parts[2]
          
          # Validate enum value
          if param_name in properties:
              param_info = properties[param_name]
              enum_values = param_info.get('enum')
              if enum_values and param_value not in enum_values:
                  # Invalid enum value
                  await query.answer(
                      f"‚ùå –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞.",
                      show_alert=True
                  )
                  return ConversationHandler.END
  ```

### üü° –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ min/max –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–∞—Å—Å–∏–≤–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ min_items/max_items –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤

---

## ‚úÖ 3. –ü–†–û–í–ï–†–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –î–õ–Ø –ö–ê–ñ–î–û–ô –ú–û–î–ï–õ–ò

### üìã –ú–æ–¥–µ–ª–∏ —Å enum –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

#### ‚úÖ `z-image`:
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `aspect_ratio`: enum ["1:1", "4:3", "3:4", "16:9", "9:16"] ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø INLINE KEYBOARD**

#### ‚úÖ `nano-banana-pro`:
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `aspect_ratio`: enum ["1:1", "2:3", "3:2", "3:4", "4:3", "4:5", "5:4", "9:16", "16:9", "21:9", "auto"] ‚úÖ
  - `resolution`: enum ["1K", "2K", "4K"] ‚úÖ
  - `output_format`: enum ["png", "jpg"] ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø INLINE KEYBOARD**

#### ‚úÖ `seedream/4.5-text-to-image`:
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `aspect_ratio`: enum ["1:1", "4:3", "3:4", "16:9", "9:16", "2:3", "3:2", "21:9"] ‚úÖ
  - `quality`: enum ["basic", "high"] ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø INLINE KEYBOARD**

#### ‚úÖ `sora-2-pro-image-to-video`:
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `aspect_ratio`: enum ["16:9", "9:16", "1:1", "4:3", "3:4"] ‚úÖ
  - `duration`: enum ["5", "10", "15"] ‚úÖ
  - `resolution`: enum ["720p", "1080p"] ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø INLINE KEYBOARD**

---

## ‚ö†Ô∏è 4. –ü–ê–†–ê–ú–ï–¢–†–´ –ë–ï–ó –í–ê–õ–ò–î–ê–¶–ò–ò

### üìã –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:

#### ‚ö†Ô∏è `prompt` (–≤—Å–µ –º–æ–¥–µ–ª–∏):
- **–¢–∏–ø:** string
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** max_length (1000-10000 —Å–∏–º–≤–æ–ª–æ–≤)
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï–¢ –í–ê–õ–ò–î–ê–¶–ò–ò –î–õ–ò–ù–´** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –ª—é–±–æ–π –¥–ª–∏–Ω—ã

#### ‚ö†Ô∏è `language_code` (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–µ–ª–∏):
- **–¢–∏–ø:** string
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** enum (–Ω–æ –µ—Å—Ç—å –æ–ø—Ü–∏—è "custom")
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï–¢ –í–ê–õ–ò–î–ê–¶–ò–ò** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∫–æ–¥ —è–∑—ã–∫–∞

---

## üìã 5. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é enum –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –≤—Å–µ enum –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å default –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ
   - –û—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –Ω–µ—Ç default –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ

2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å max_length –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –û—Ç–∫–ª–æ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–µ–≤—ã—à–∞—é—â–∏–µ max_length
   - –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä–æ—á–µ

3. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ set_param callback**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å enum –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —á–µ—Ä–µ–∑ callback
   - –û—Ç–∫–ª–æ–Ω—è—Ç—å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ä–∞–∑—É

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å min/max –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –û—Ç–∫–ª–æ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –º–∞—Å—Å–∏–≤–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å min_items/max_items –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤
   - –û—Ç–∫–ª–æ–Ω—è—Ç—å –º–∞—Å—Å–∏–≤—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## üìã 6. –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é enum –∑–Ω–∞—á–µ–Ω–∏–π –≤ confirm_generation
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É enum –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å default –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ
3. –û—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –Ω–µ—Ç default –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ input_parameters
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å max_length –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. –û—Ç–∫–ª–æ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–µ–≤—ã—à–∞—é—â–∏–µ max_length
3. –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä–æ—á–µ

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ set_param callback
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å enum –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —á–µ—Ä–µ–∑ callback
2. –û—Ç–∫–ª–æ–Ω—è—Ç—å –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ä–∞–∑—É

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ **–í–ê–õ–ò–î–ê–¶–ò–Ø –î–û–ë–ê–í–õ–ï–ù–ê**

–î–ª—è enum –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è inline keyboard –∫–Ω–æ–ø–∫–∏, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤–≤–æ–¥ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ UI. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ API –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ –∏–ª–∏ –æ–±—Ö–æ–¥–µ UI.

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API** (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
2. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (max_length)** (—É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
3. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤ set_param callback** (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
4. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤ (min_items/max_items)** (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. üî¥ **–í—ã—Å–æ–∫–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é enum –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ API
2. üî¥ **–í—ã—Å–æ–∫–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. üî¥ **–í—ã—Å–æ–∫–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ set_param callback
4. üü° **–°—Ä–µ–¥–Ω–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–∏—Å–ª–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
5. üü¢ **–ù–∏–∑–∫–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –º–∞—Å—Å–∏–≤–æ–≤

---

## üìä 7. –¢–ê–ë–õ–ò–¶–ê –ü–†–û–í–ï–†–ö–ò –ü–ê–†–ê–ú–ï–¢–†–û–í –ü–û –ú–û–î–ï–õ–Ø–ú

| –ú–æ–¥–µ–ª—å | –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | Enum | –í–∞–ª–∏–¥–∞—Ü–∏—è UI | –í–∞–ª–∏–¥–∞—Ü–∏—è API |
|--------|----------|-----|------|--------------|---------------|
| z-image | aspect_ratio | string | ‚úÖ | ‚úÖ | ‚úÖ |
| nano-banana-pro | aspect_ratio | string | ‚úÖ | ‚úÖ | ‚úÖ |
| nano-banana-pro | resolution | string | ‚úÖ | ‚úÖ | ‚úÖ |
| nano-banana-pro | output_format | string | ‚úÖ | ‚úÖ | ‚úÖ |
| seedream/4.5-text-to-image | aspect_ratio | string | ‚úÖ | ‚úÖ | ‚úÖ |
| seedream/4.5-text-to-image | quality | string | ‚úÖ | ‚úÖ | ‚úÖ |
| sora-2-pro-image-to-video | aspect_ratio | string | ‚úÖ | ‚úÖ | ‚úÖ |
| sora-2-pro-image-to-video | duration | string | ‚úÖ | ‚úÖ | ‚úÖ |
| sora-2-pro-image-to-video | resolution | string | ‚úÖ | ‚úÖ | ‚úÖ |
| –í—Å–µ –º–æ–¥–µ–ª–∏ | prompt | string | ‚ùå | ‚úÖ | ‚úÖ |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –ë–µ–∑ –∑–∞–ø—É—Å–∫–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å–µ –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

